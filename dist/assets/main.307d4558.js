import{c as q,r as v,u as S,a as L,t as w,b as z}from"./utils.4c87f633.js";var A={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */(function(l,d){(function(m,h,p){var g=function(t,e,n){n=r.extend({},r.options,n);var a=r.runValidations(t,e,n);if(a.some(function(s){return r.isPromise(s.error)}))throw new Error("Use validate.async if you want support for promises");return g.processValidationResults(a,n)},r=g;r.extend=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in e)t[n]=e[n]}),t},r.extend(g,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=r.format("%{major}.%{minor}.%{patch}",r.version);return r.isEmpty(r.version.metadata)||(t+="+"+r.version.metadata),t}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var a=[],s,i,u,c,f,o,x;(r.isDomElement(t)||r.isJqueryElement(t))&&(t=r.collectFormValues(t));for(s in e){u=r.getDeepObjectValue(t,s),c=r.result(e[s],u,t,s,n,e);for(i in c){if(f=r.validators[i],!f)throw x=r.format("Unknown validator %{name}",{name:i}),new Error(x);o=c[i],o=r.result(o,u,t,s,n,e),o&&a.push({attribute:s,value:u,validator:i,globalOptions:n,attributes:t,options:o,error:f.call(f,u,o,s,t,n)})}}return a},processValidationResults:function(t,e){t=r.pruneEmptyErrors(t,e),t=r.expandMultipleErrors(t,e),t=r.convertErrorMessages(t,e);var n=e.format||"grouped";if(typeof r.formatters[n]=="function")t=r.formatters[n](t);else throw new Error(r.format("Unknown format %{format}",e));return r.isEmpty(t)?void 0:t},async:function(t,e,n){n=r.extend({},r.async.options,n);var a=n.wrapErrors||function(i){return i};n.cleanAttributes!==!1&&(t=r.cleanAttributes(t,e));var s=r.runValidations(t,e,n);return new r.Promise(function(i,u){r.waitForResults(s).then(function(){var c=r.processValidationResults(s,n);c?u(new a(c,n,t,e)):i(t)},function(c){u(c)})})},single:function(t,e,n){return n=r.extend({},r.single.options,n,{format:"flat",fullMessages:!1}),r({single:t},{single:e},n)},waitForResults:function(t){return t.reduce(function(e,n){return r.isPromise(n.error)?e.then(function(){return n.error.then(function(a){n.error=a||null})}):e},new r.Promise(function(e){e()}))},result:function(t){var e=[].slice.call(arguments,1);return typeof t=="function"&&(t=t.apply(null,e)),t},isNumber:function(t){return typeof t=="number"&&!isNaN(t)},isFunction:function(t){return typeof t=="function"},isInteger:function(t){return r.isNumber(t)&&t%1===0},isBoolean:function(t){return typeof t=="boolean"},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return t!=null},isPromise:function(t){return!!t&&r.isFunction(t.then)},isJqueryElement:function(t){return t&&r.isString(t.jquery)},isDomElement:function(t){return!t||!t.querySelectorAll||!t.querySelector?!1:r.isObject(document)&&t===document?!0:typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isEmpty:function(t){var e;if(!r.isDefined(t))return!0;if(r.isFunction(t))return!1;if(r.isString(t))return r.EMPTY_STRING_REGEXP.test(t);if(r.isArray(t))return t.length===0;if(r.isDate(t))return!1;if(r.isObject(t)){for(e in t)return!1;return!0}return!1},format:r.extend(function(t,e){return r.isString(t)?t.replace(r.format.FORMAT_REGEXP,function(n,a,s){return a==="%"?"%{"+s+"}":String(e[s])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return r.isNumber(t)?t*100%1===0?""+t:parseFloat(Math.round(t*100)/100).toFixed(2):r.isArray(t)?t.map(function(e){return r.prettify(e)}).join(", "):r.isObject(t)?r.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t,t.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+" "+a.toLowerCase()}).toLowerCase())},stringifyValue:function(t,e){var n=e&&e.prettify||r.prettify;return n(t)},isString:function(t){return typeof t=="string"},isArray:function(t){return{}.toString.call(t)==="[object Array]"},isHash:function(t){return r.isObject(t)&&!r.isArray(t)&&!r.isFunction(t)},contains:function(t,e){return r.isDefined(t)?r.isArray(t)?t.indexOf(e)!==-1:e in t:!1},unique:function(t){return r.isArray(t)?t.filter(function(e,n,a){return a.indexOf(e)==n}):t},forEachKeyInKeypath:function(t,e,n){if(!!r.isString(e)){var a="",s,i=!1;for(s=0;s<e.length;++s)switch(e[s]){case".":i?(i=!1,a+="."):(t=n(t,a,!1),a="");break;case"\\":i?(i=!1,a+="\\"):i=!0;break;default:i=!1,a+=e[s];break}return n(t,a,!0)}},getDeepObjectValue:function(t,e){if(!!r.isObject(t))return r.forEachKeyInKeypath(t,e,function(n,a){if(r.isObject(n))return n[a]})},collectFormValues:function(t,e){var n={},a,s,i,u,c,f;if(r.isJqueryElement(t)&&(t=t[0]),!t)return n;for(e=e||{},u=t.querySelectorAll("input[name], textarea[name]"),a=0;a<u.length;++a)if(i=u.item(a),!r.isDefined(i.getAttribute("data-ignored"))){var o=i.name.replace(/\./g,"\\\\.");f=r.sanitizeFormValue(i.value,e),i.type==="number"?f=f?+f:null:i.type==="checkbox"?i.attributes.value?i.checked||(f=n[o]||null):f=i.checked:i.type==="radio"&&(i.checked||(f=n[o]||null)),n[o]=f}for(u=t.querySelectorAll("select[name]"),a=0;a<u.length;++a)if(i=u.item(a),!r.isDefined(i.getAttribute("data-ignored"))){if(i.multiple){f=[];for(s in i.options)c=i.options[s],c&&c.selected&&f.push(r.sanitizeFormValue(c.value,e))}else{var x=typeof i.options[i.selectedIndex]<"u"?i.options[i.selectedIndex].value:"";f=r.sanitizeFormValue(x,e)}n[i.name]=f}return n},sanitizeFormValue:function(t,e){return e.trim&&r.isString(t)&&(t=t.trim()),e.nullify!==!1&&t===""?null:t},capitalize:function(t){return r.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(e){return!r.isEmpty(e.error)})},expandMultipleErrors:function(t){var e=[];return t.forEach(function(n){r.isArray(n.error)?n.error.forEach(function(a){e.push(r.extend({},n,{error:a}))}):e.push(n)}),e},convertErrorMessages:function(t,e){e=e||{};var n=[],a=e.prettify||r.prettify;return t.forEach(function(s){var i=r.result(s.error,s.value,s.attribute,s.options,s.attributes,s.globalOptions);if(!r.isString(i)){n.push(s);return}i[0]==="^"?i=i.slice(1):e.fullMessages!==!1&&(i=r.capitalize(a(s.attribute))+" "+i),i=i.replace(/\\\^/g,"^"),i=r.format(i,{value:r.stringifyValue(s.value,e)}),n.push(r.extend({},s,{error:i}))}),n},groupErrorsByAttribute:function(t){var e={};return t.forEach(function(n){var a=e[n.attribute];a?a.push(n):e[n.attribute]=[n]}),e},flattenErrorsToArray:function(t){return t.map(function(e){return e.error}).filter(function(e,n,a){return a.indexOf(e)===n})},cleanAttributes:function(t,e){function n(i,u,c){return r.isObject(i[u])?i[u]:i[u]=c?!0:{}}function a(i){var u={},c;for(c in i)!i[c]||r.forEachKeyInKeypath(u,c,n);return u}function s(i,u){if(!r.isObject(i))return i;var c=r.extend({},i),f,o;for(o in i)f=u[o],r.isObject(f)?c[o]=s(c[o],f):f||delete c[o];return c}return!r.isObject(e)||!r.isObject(t)?{}:(e=a(e),s(t,e))},exposeModule:function(t,e,n,a,s){n?(a&&a.exports&&(n=a.exports=t),n.validate=t):(e.validate=t,t.isFunction(s)&&s.amd&&s([],function(){return t}))},warn:function(t){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){typeof console<"u"&&console.error&&console.error("[validate.js] "+t)}}),g.validators={presence:function(t,e){if(e=r.extend({},this.options,e),e.allowEmpty!==!1?!r.isDefined(t):r.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,n){if(!!r.isDefined(t)){e=r.extend({},this.options,e);var a=e.is,s=e.maximum,i=e.minimum,u=e.tokenizer||function(x){return x},c,f=[];t=u(t);var o=t.length;if(!r.isNumber(o))return e.message||this.notValid||"has an incorrect length";if(r.isNumber(a)&&o!==a&&(c=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",f.push(r.format(c,{count:a}))),r.isNumber(i)&&o<i&&(c=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",f.push(r.format(c,{count:i}))),r.isNumber(s)&&o>s&&(c=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",f.push(r.format(c,{count:s}))),f.length>0)return e.message||f}},numericality:function(t,e,n,a,s){if(!!r.isDefined(t)){e=r.extend({},this.options,e);var i=[],u,c,f={greaterThan:function(b,E){return b>E},greaterThanOrEqualTo:function(b,E){return b>=E},equalTo:function(b,E){return b===E},lessThan:function(b,E){return b<E},lessThanOrEqualTo:function(b,E){return b<=E},divisibleBy:function(b,E){return b%E===0}},o=e.prettify||s&&s.prettify||r.prettify;if(r.isString(t)&&e.strict){var x="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(x+="(\\.\\d+)?"),x+="$",!new RegExp(x).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(e.noStrings!==!0&&r.isString(t)&&!r.isEmpty(t)&&(t=+t),!r.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!r.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(u in f)if(c=e[u],r.isNumber(c)&&!f[u](t,c)){var T="not"+r.capitalize(u),F=e[T]||this[T]||this.message||"must be %{type} %{count}";i.push(r.format(F,{count:c,type:o(u)}))}if(e.odd&&t%2!==1&&i.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!==0&&i.push(e.notEven||this.notEven||this.message||"must be even"),i.length)return e.message||i}},datetime:r.extend(function(t,e){if(!r.isFunction(this.parse)||!r.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(!!r.isDefined(t)){e=r.extend({},this.options,e);var n,a=[],s=e.earliest?this.parse(e.earliest,e):NaN,i=e.latest?this.parse(e.latest,e):NaN;if(t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!==0)return n=e.notValid||e.message||this.notValid||"must be a valid date",r.format(n,{value:arguments[0]});if(!isNaN(s)&&t<s&&(n=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",n=r.format(n,{value:this.format(t,e),date:this.format(s,e)}),a.push(n)),!isNaN(i)&&t>i&&(n=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",n=r.format(n,{date:this.format(i,e),value:this.format(t,e)}),a.push(n)),a.length)return r.unique(a)}},{parse:null,format:null}),date:function(t,e){return e=r.extend({},e,{dateOnly:!0}),r.validators.datetime.call(r.validators.datetime,t,e)},format:function(t,e){(r.isString(e)||e instanceof RegExp)&&(e={pattern:e}),e=r.extend({},this.options,e);var n=e.message||this.message||"is invalid",a=e.pattern,s;if(!!r.isDefined(t)&&(!r.isString(t)||(r.isString(a)&&(a=new RegExp(e.pattern,e.flags)),s=a.exec(t),!s||s[0].length!=t.length)))return n},inclusion:function(t,e){if(!!r.isDefined(t)&&(r.isArray(e)&&(e={within:e}),e=r.extend({},this.options,e),!r.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return r.format(n,{value:t})}},exclusion:function(t,e){if(!!r.isDefined(t)&&(r.isArray(e)&&(e={within:e}),e=r.extend({},this.options,e),!!r.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return r.isString(e.within[t])&&(t=e.within[t]),r.format(n,{value:t})}},email:r.extend(function(t,e){e=r.extend({},this.options,e);var n=e.message||this.message||"is not a valid email";if(!!r.isDefined(t)&&(!r.isString(t)||!this.PATTERN.exec(t)))return n},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,e,n,a,s){if(!!r.isDefined(t)){r.isString(e)&&(e={attribute:e}),e=r.extend({},this.options,e);var i=e.message||this.message||"is not equal to %{attribute}";if(r.isEmpty(e.attribute)||!r.isString(e.attribute))throw new Error("The attribute must be a non empty string");var u=r.getDeepObjectValue(a,e.attribute),c=e.comparator||function(o,x){return o===x},f=e.prettify||s&&s.prettify||r.prettify;if(!c(t,u,e,n,a))return r.format(i,{attribute:f(e.attribute)})}},url:function(t,e){if(!!r.isDefined(t)){e=r.extend({},this.options,e);var n=e.message||this.message||"is not a valid url",a=e.schemes||this.schemes||["http","https"],s=e.allowLocal||this.allowLocal||!1,i=e.allowDataUrl||this.allowDataUrl||!1;if(!r.isString(t))return n;var u="^(?:(?:"+a.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",c="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(s?c+="?":u+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",u+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+c+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",i){var f="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",o="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",x="data:(?:"+f+")?(?:;base64)?,"+o;u="(?:"+u+")|(?:^"+x+"$)"}var T=new RegExp(u,"i");if(!T.exec(t))return n}},type:r.extend(function(t,e,n,a,s){if(r.isString(e)&&(e={type:e}),!!r.isDefined(t)){var i=r.extend({},this.options,e),u=i.type;if(!r.isDefined(u))throw new Error("No type was specified");var c;if(r.isFunction(u)?c=u:c=this.types[u],!r.isFunction(c))throw new Error("validate.validators.type.types."+u+" must be a function.");if(!c(t,i,n,a,s)){var f=e.message||this.messages[u]||this.message||i.message||(r.isFunction(u)?"must be of the correct type":"must be of type %{type}");return r.isFunction(f)&&(f=f(t,e,n,a,s)),r.format(f,{attribute:r.prettify(n),type:u})}}},{types:{object:function(t){return r.isObject(t)&&!r.isArray(t)},array:r.isArray,integer:r.isInteger,number:r.isNumber,string:r.isString,date:r.isDate,boolean:r.isBoolean},messages:{}})},g.formatters={detailed:function(t){return t},flat:r.flattenErrorsToArray,grouped:function(t){var e;t=r.groupErrorsByAttribute(t);for(e in t)t[e]=r.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;t=r.groupErrorsByAttribute(t);for(e in t)t[e]=t[e].map(function(n){return n.validator}).sort();return t}},g.exposeModule(g,this,m,h,p)}).call(q,d,l,null)})(A,A.exports);const V=l=>{const d={name:{presence:{message:"\u59D3\u540D\u680F\u4F4D\u4E0D\u5F97\u4E3A\u7A7A"}},tel:{presence:{message:"\u7535\u8BDD\u680F\u4F4D\u4E0D\u5F97\u4E3A\u7A7A"},format:{pattern:"[0-9]+",flags:"i",message:"\u7535\u8BDD\u53F7\u7801\u5FC5\u987B\u4E3A 0-9"},length:{minimum:10,maximum:11,tooShort:"\u7535\u8BDD\u53F7\u7801\u6700\u77ED\u957F\u5EA6\u4E3A%{count}\u4E2A\u53F7\u7801",tooLong:"\u7535\u8BDD\u53F7\u7801\u6700\u5927\u957F\u5EA6\u4E3A%{count}\u4E2A\u53F7\u7801"}},email:{presence:{message:"\u90AE\u7BB1\u680F\u4F4D\u4E0D\u5F97\u4E3A\u7A7A"},email:{message:"\u8BF7\u786E\u4FDD\u90AE\u7BB1\u683C\u5F0F\u6B63\u786E"}},address:{presence:{message:"\u5730\u5740\u680F\u4F4D\u4E0D\u5F97\u4E3A\u7A7A"}}},m=A.exports.validate(l,d);return m&&Object.entries(m)},j=document.querySelector("#pre-order"),P=document.querySelector("#products-filter-select"),R=document.querySelector("#products-list"),k=document.querySelector("#cart-list"),M=document.querySelector("#cart-list-bottom"),$=document.querySelector("#cart-list-total-price"),O=document.querySelector("#cart-header"),y={productsList:[],cartList:[]},D=l=>l.length===0?'<p class="text-center">\u5F53\u524D\u4EA7\u54C1\u5217\u8868\u4E3A\u7A7A</p>':l.map(d=>{const{origin_price:m,price:h,title:p,images:g,category:r,id:t}=d;return`
                <li class="relative">
                    <div class="absolute top-2 py-2 px-6 bg-black text-white right-0">
                        ${r}
                    </div>
                    <img src=${g} alt=${p} class="h-[300px] w-full object-cover" />
                    <button
                        type="button"
                        class="bg-black text-white w-full py-3 hover:bg-primary-extra-dark transition-colors"
                        data-id=${t}
                    >
                        \u52A0\u5165\u8CFC\u7269\u8ECA
                    </button>
                    <div class="mt-2">
                        <h3 class="mb-2">${p}</h3>
                        <p class="line-through">NT$${w(m)}</p>
                        <strong class="text-[1.75rem]">NT$${w(h)}</strong>
                    </div>
                </li>            
            `}).join(""),N=l=>{const d=document.querySelector("#cart-list-bottom");if(l.length===0)return O.classList.add("hidden"),d.classList.remove("flex"),d.classList.add("hidden"),'<td class="text-center">\u5F53\u524D\u8D2D\u7269\u5217\u8868\u4E3A\u7A7A!</td>';let m=0;const h=l.map(p=>{const{images:g,price:r,title:t}=p.product,{id:e,quantity:n}=p;return m+=n*r,`
            <tr>
                <td width="300">
                    <img src=${g} class="inline-block w-20 h-20" />
                    <p class="w-[14ch] inline-block align-middle ml-4">
                        ${t}
                    </p>
                </td>
                <td></td>
                <td><p>NT$${w(r)}</p></td>
                <td><p>${n}</p></td>
                <td><p>NT$${w(n*r)}</p></td>
                <td>
                    <button type="button" class="material-icons" data-id=${e}>clear</button>
                </td>
            </tr>
      `});return $.textContent=`NT$${w(m)}`,O.classList.remove("hidden"),d.classList.remove("hidden"),d.classList.add("flex"),h.join("")};P.addEventListener("change",l=>{const{value:d}=l.target;if(d==="\u5168\u90E8"){v("#products-list",D,y.productsList);return}const m=y.productsList.filter(({category:h})=>h===d);v("#products-list",D,m)});j.addEventListener("submit",async l=>{if(l.preventDefault(),y.cartList.length===0){S({text:"\u76EE\u524D\u8D2D\u7269\u8F66\u4E3A\u7A7A",icon:"error"});return}[...l.target].forEach(h=>{h.localName==="input"&&(h.nextElementSibling.textContent="")});const d=V(l.target);if(d!=null&&d.length){d.forEach(h=>{const[p,g]=h,r=l.target[p].nextElementSibling;if(g.length===1){r.textContent=g[0];return}r.textContent=g.join(", ")});return}const{status:m}=await L({method:"post",url:"/orders",data:{data:{user:Object.fromEntries(new FormData(l.target))}}});m&&S({text:"\u8BA2\u5355\u6210\u529F\u9001\u51FA\u{1F600}"}),y.cartList=[],v("#cart-list",N,[]),l.target.reset()});R.addEventListener("click",async l=>{if(l.target.nodeName!=="BUTTON")return;const d=l.target.dataset.id,m=y.cartList.find(r=>{var t;return((t=r==null?void 0:r.product)==null?void 0:t.id)===d});let h=null;m?h=parseInt(m.quantity)+1:h=1;const{carts:p,finalTotal:g}=await L({method:"post",url:"/carts",data:{data:{quantity:h,productId:d}}});y.cartList=p,v("#cart-list",N,y.cartList),$.textContent=`NT$${w(g)}`});k.addEventListener("click",async l=>{if(l.target.nodeName!=="BUTTON")return;const{carts:d,finalTotal:m}=await L({method:"delete",url:`/carts/${l.target.dataset.id}`});y.cartList=d,$.textContent=`NT$${w(m)}`,v("#cart-list",N,y.cartList),S({text:"\u5220\u9664\u6210\u529F"})});M.addEventListener("click",async l=>{if(l.target.nodeName!=="BUTTON"||!await S({type:"decision",text:"\u786E\u5B9A\u5220\u9664\u8D2D\u7269\u8F66\u5185\u6240\u6709\u5546\u54C1?",icon:"warning"}))return;const{carts:m,finalTotal:h,message:p}=await L({method:"delete",url:"/carts"});y.cartList=m,$.textContent=`NT$${w(h)}`,v("#cart-list",N,y.cartList),S({text:p})});const B=async()=>{try{const[l,d]=await L(z);y.productsList=l,y.cartList=d,v("#products-list",D,y.productsList),v("#cart-list",N,y.cartList)}catch(l){S({text:l.message,icon:"error"})}};B();
